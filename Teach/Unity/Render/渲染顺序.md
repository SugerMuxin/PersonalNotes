---
author: RuoSaChen
tags:
  - unity
  - shader
---
![[cover-shader 2.png]]

1.在有多个相机的情况下首先判断Camera的Depth.   Depth低的先被渲染

2.深度，在同一个相机之下，深度是权重最大的优先级，这和物理世界一样，越是靠近相机（眼睛的物体）的对象一定是在后面的。

>当然这里不包括图形学中的一些非常特殊的处理，比如 ZTest Always .  这会让深度对比变的没有意义

3.深度之下的渲染模式，Opaque对象始终是在 Transparent对象之前渲染的，这是因为透明物体往往需要混合导致的，不透明的物体分隔
	RenderQueue 2500是透明与不透明的分水岭。
	同一个相机下
	Renderqueue小于2500的物体 始终在 Renderqueue大于2500之前绘制。

<span style="color:red;">Tips: 当两个对象的深度完全相同，渲染模式也相同。但是由于浮点数计算的精度问题，显示的结果往往不尽如人意</span>


4.在相同深度，相同模式的情况下，渲染层级就是大哥了。此时 Sorting Layer 能够决定谁在前面
	如果Camera相同，那接下来就看Sorting Layers，越低越早绘制。

<span style="color:red;">那么这里问个问题，假如场景中有三个cube（下图），分别在不同的layer？，那么应该会分为几个批次来渲染呢？</span>
![[Pasted image 20240425172732.png]]

<span style="color:green;">答案是三个正方体会在一次DC中渲染，并不是想象中的分为三个layer先后来渲染。因为三个物体使用了相同的材质，Dynamic Batching对其进行了合批。</span>


5.如果Layer 也相同的话 Order in Layer就决定了两个对象的顺序了
	相对于Sorting Layer的子排序，用这个值做比较时只有都在同一层时才有效。
	soringOrder也是Render的一个属性，这个order是设置一个数字，数字越大，越在上面显示。（但是只有在物理世界中完全相同的两个对象才能讨论sortingorder的问题，如果两个物体的深度都不同，无论是Layer 还是 Order 都没有意义）
	![[Pasted image 20240424192408.png]]

SortingGroup ： 这个组件就可以对不同的层级和相同的layer进行渲染顺序的调节（<span style="color:yellow;">SortingGroup将这个对象的所有子对象作为一个整体来考虑，子对象不再单独参与全局排序的规则，组内仍可以通过Order in Layer 或者材质的 RenderQueue来调整内部的顺序</span>）

6.如果Order也相同，那么此时Shader中的 RenderQueue就是最后的保障了。
	Shader中对Tags设置的“Queue”。
	如果上述几项都相同，那就要看renderQueue了，renderQueure是Material的一个属性，其实就是Shader中的renderQueue，这个也是一个int属性，数值越小，越靠前渲染。
![[Pasted image 20240424192534.png]]


